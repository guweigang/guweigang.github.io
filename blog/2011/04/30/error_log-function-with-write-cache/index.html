<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>用error_log函数写缓存 - Gu Weigang</title>
  <meta charset="utf-8" />
  <meta name="author" content="Gu Weigang" />
  <meta name="description" content="" />
  <meta name="keywords" content="" />

  <link rel="alternate" title="RSS Feed" href="/rss.xml" type="application/rss+xml">

  <link rel="stylesheet" href="/media/css/main.css" type="text/css">
  <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
</head>

  <body class="container">
<header id="header">
  <h1 class="title"><a href="/">Gu Weigang</a></h1>
  <ul>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/tags/">Tags</a></li>
    <li><a href="/about/">About</a></li>
  </ul>
  <form method="get" id="search" action="https://duckduckgo.com">
    <input type="text" class="field" name="q" id="s" placeholder="Search">
    <input type="hidden" name="q" value="site:guweigang.com">
  </form>
</header>

<section id="content" role="main">
  <h1>用error_log函数写缓存</h1>
  <p>
恩，没错，@伪造 在看<a href="http://justinvincent.com/ezsql">ezSQL</a>源代码的时候，总是看到作者用error\_log函数写缓存，如：
</p>


<pre class="example">
error_log( serialize($result_cache), 3, $cache_file);
</pre>


<p>
来看看error\_log的原型：
</p>


<pre class="example">
bool error_log ( string $message [, 
    int $message_type = 0 [, string $destination [, string $extra_headers ]]] )
</pre>




<p>
<b>*error\_log()</b> log types*
</p>










<p>
0
</p>




<p>
<i><code>message</code></i> is sent to PHP's system logger, using the Operating System's system logging mechanism or a file, depending on what the <i>error\_log</i> configuration directive is set to. This is the default option.
</p>










<p>
1
</p>




<p>
<i><code>message</code></i> is sent by email to the address in the <i><code>destination</code></i> parameter. This is the only message type where the fourth parameter, <i><code>extra_headers</code></i> is used.
</p>










<p>
2
</p>




<p>
No longer an option.
</p>










<p>
3
</p>




<p>
<i><code>message</code></i> is appended to the file <i><code>destination</code></i>. A newline is not automatically added to the end of the <i><code>message</code></i> string.
</p>










<p>
4
</p>




<p>
<i><code>message</code></i> is sent directly to the SAPI logging handler.
</p>












<p>
当$message\_type 值为3时，代表写文件，而且是以append的方式写文件。同类型的函数有file\_put\_contents，不过它是以覆盖方式写文件。而使用这两个函数，都能节约代码，因为file\_put\_conents和error\_log不需要提前获得文件句柄，当然也不需要关闭它们。
</p>

</section>



<footer id="footer">
    Send comments, critique and suggestions to <a href="mailto:guweigang &lt;at&gt; outlook &lt;dot&gt; com">Gu Weigang</a>.
    Powered by <a href="https://github.com/kelvinh/org-page">org-page</a>
</footer>

  </body>
</html>
