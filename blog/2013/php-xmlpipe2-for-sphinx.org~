#+TITLE:       PHP xmlpipe2 for sphinx indexes
#+AUTHOR:      Gu Weigang
#+EMAIL:       guweigang@outlook.com
#+DATE:        2013-12-02 Mon
#+URI:         /blog/%y/%m/%d/php-xmlpipe2-for-sphinx/
#+KEYWORDS:    php, xmlpipe, sphinx
#+TAGS:        sphinx:php
#+LANGUAGE:    zh_CN
#+OPTIONS:     H:3 num:nil toc:nil \n:nil ::t |:t ^:nil -:nil f:t *:t <:t
#+DESCRIPTION: 使用XMLPIPE2方式创建sphinx索引

#+BEGIN_HTML
<style type="text/css">
table {
line-height: 1.5 !important;
}
.gist {
font-size: 14px;
}
</style>
#+END_HTML

Sphinx的索引源可以有很多种格式：
 - mysql
 - pgsql
 - mssql
 - xmlpipe
 - xmlpipe2
 - odbc

对于简单的数据需求，我们可以直接使用mysql, pgsql等Sphinx内置的源数据拉取工具，但是有些时候在生成索引之前是需要复杂计算和逻辑处理的，这样的话就不得不使用xmlpipe接口了，下面是用PHP写的满足Sphinx XMLPIPE2接口要求的代码。
   
#+BEGIN_HTML
<script src="https://gist.github.com/guweigang/7745073.js"></script>
#+END_HTML   
