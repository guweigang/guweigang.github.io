<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>PHP产生随机密码 - 闭眼听世界</title>
    <meta charset="utf-8" />
    <meta name="author" content="Gu Weigang" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">闭眼听世界</a></h1>
        <p>心如松静意无尘，气若浮萍了无痕！</p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/gray/">Gray</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="https://github.com/guweigang">GitHub</a></li>
        </ul>
        <form method="get" id="searchform" action="http://www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="q" value="site:guweigang.com">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>PHP产生随机密码</h1>
<p>
原文链接: <a href="http://abeautifulsite.net/2008/05/generate-random-passwords-in-php/"><a href="http://abeautifulsite.net/2008/05/generate-random-passwords-in-php/">http://abeautifulsite.net/2008/05/generate-random-passwords-in-php/</a></a>
</p>


<blockquote>
<p>
Here is a function I wrote to generate a random string in PHP. It is probably most useful for generating passwords. You can specify the length of the resulting string, as well as what characters are allowed. The default length is eight and the default character set is alphanumeric.
</p>
</blockquote>





<pre class="example">
function random_string($length = 8, $chars = null) {
    if( empty($chars) ) $chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
    while( strlen($s) &lt; $length) {
        $s .= substr($chars, rand(0, strlen($chars) - 1), 1);
    }
    return $s;
}
// Example
echo random_string(10);
</pre>



<p>
After improving:
</p>

<p>
you can specify "char range", such as : alpha only, number only or both of than. Also, you can append the array $char\_arr...
</p>


<pre class="example">
// ---------------------------------------------
// create pre-fixed width random string
// author: Roy@Gu
// date: 2009-12-5
//
function random_string($length = 8, $chars_range = 'alpha-number') {
    $str = '';
    $chars = '';
    $char_arr = array(
        "alpha" =&gt; "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
        "number" =&gt; "0123456789",
    );
    if (empty($chars_range)) {
        $chars_rang = 'alpha-number';
    }
    if(strpos($chars_range, '-')) {
        $char_range_arr = explode('-',$chars_range);
        foreach($char_range_arr as $range){
            if(!array_key_exists($range, $char_arr)){
                exit("wrong range \"". $range ."\"");
            }
            $chars .= $char_arr[$range];
        }
    }else{
        if(!array_key_exists($chars_range, $char_arr)){
                exit("wrong range \"".$chars_range ."\"");
        }
        $chars = $char_arr[$chars_range];
    }
    while( strlen($str) &lt; $length) {
        $str .= substr($chars, rand(0, strlen($chars) - 1), 1);
    }
    return $str;
}
</pre>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2009-12-05</span>
        <span title="last modification date" class="post-info">2013-07-05</span>
        <span title="tags" class="post-info"><a href="/tags/php/">php</a>, <a href="/tags/random-passwords/">random passwords</a>, <a href="/tags/随机密码/">随机密码</a></span>
        <span title="author" class="post-info">Gu Weigang</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/2009/12/05/php-generate-a-random-password/";
          var disqus_url = "http://guweigang.com/blog/2009/12/05/php-generate-a-random-password/";
          var disqus_shortname = 'guweigang';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </section>
      <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'cnwggu@gmail.com']);
        _gaq.push(['_trackPageview']);
        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.0.3)</p>
        <p>
          Copyright &copy; 2012 - 2013 <a href="mailto:guweigang &lt;at&gt; outlook &lt;dot&gt; com">Gu Weigang</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
        </p>
      </div>
    </div>
  </body>
</html>
