<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>用PHP压缩CSS - Gu Weigang</title>
    <meta charset="utf-8" />
    <meta name="author" content="Gu Weigang" />
    <meta name="description" content="" />
    <meta name="keywords" content="compressing, css, php" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">Gu Weigang</a></h1>
        <p>A Geek&#39;s Blog</p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="https://github.com/guweigang">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="http://www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="q" value="site:guweigang.com">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>用PHP压缩CSS</h1>
<p>
原文链接：<a href="http://abeautifulsite.net/2009/11/compressing-css-with-php/"><a href="http://abeautifulsite.net/2009/11/compressing-css-with-php/">http://abeautifulsite.net/2009/11/compressing-css-with-php/</a></a>
</p>

<p>
原文：
</p>

<blockquote>
<p>
  Here is a short PHP function that removes comments and whitespace from your CSS. If you happen to be generating your stylesheet dynamically, try wrapping this around the output to reduce the overall size.function compress\_css($css) {
<i>/ Remove comments
$css = preg\_replace('!</i>\*[\^*]*\*+([\^/][\^*]*\*+)*/!', '', $css);
// Remove whitespace
$css = str\_replace(array("\r\n", "\r", "\n", "\t", ' ', ' ', ' '), '', $css);
return $css;
}
</p>

<p>
Dont' forget that, if you are using PHP to output CSS, you'll need to serve the correct headers:header("Content-type: text/css");
header("Expires: " . gmdate("D, d M Y H:i:s", (time() + 604800000)) . " GMT");
</p>

<p>
The second line tells the browser to cache the styles for seven days. You can adjust that accordingly based on your preferences.
</p>
</blockquote>


<pre class="example">
// Remove comments
$css = preg_replace('!/\*[^*]*\*+([^/][^*]*\*+)*/!', '', $css);
// Remove whitespace
$css = str_replace(array("\r\n", "\r", "\n", "\t", '  ', '    ', '    '), '', $css);
return $css;
}
// Serve the correct headers
header("Content-type: text/css");
header("Expires: " . gmdate("D, d M Y H:i:s", (time() + 604800000)) . " GMT");
</pre>

<p>
上面的英文很简单，相信不用翻译了。
</p>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2009-12-05</span>
        <span title="last modification date" class="post-info">2013-07-05</span>
        <span title="tags" class="post-info"><a href="/tags/compressing/">compressing</a> <a href="/tags/css/">css</a> <a href="/tags/php/">php</a></span>
        <span title="author" class="post-info">Gu Weigang</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/2009/12/05/compress-css-with-php/";
          var disqus_url = "http://guweigang.com/blog/2009/12/05/compress-css-with-php/";
          var disqus_shortname = 'guweigang';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </section>
      <script src="http://code.jquery.com/jquery-latest.min.js"></script>
      <script src="https://google-code-prettify.googlecode.com/svn/loader/prettify.js"></script>
      <script src="/media/js/main.js"></script>
      <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-51493169-1']);
        _gaq.push(['_trackPageview']);
        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.x (<a href="http://orgmode.org">Org mode</a> 8.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:guweigang &lt;at&gt; outlook &lt;dot&gt; com">Gu Weigang</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
