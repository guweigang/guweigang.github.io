<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>用PHP压缩CSS - Gu Weigang</title>
  <meta charset="utf-8" />
  <meta name="author" content="Gu Weigang" />
  <meta name="description" content="" />
  <meta name="keywords" content="compressing, css, php" />

  <link rel="alternate" title="RSS Feed" href="/rss.xml" type="application/rss+xml">

  <link rel="stylesheet" href="/media/css/main.css" type="text/css">
  <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
</head>

  <body class="container">
<header id="header">
  <h1 class="title"><a href="/">Gu Weigang</a></h1>
  <ul>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/tags/">Tags</a></li>
    <li><a href="/about/">About</a></li>
  </ul>
  <form method="get" id="search" action="https://duckduckgo.com">
    <input type="text" class="field" name="q" id="s" placeholder="Search">
    <input type="hidden" name="q" value="site:guweigang.com">
  </form>
</header>

<section id="content" role="main">
  <h1>用PHP压缩CSS</h1>
  <p>
原文链接：<a href="http://abeautifulsite.net/2009/11/compressing-css-with-php/"><a href="http://abeautifulsite.net/2009/11/compressing-css-with-php/">http://abeautifulsite.net/2009/11/compressing-css-with-php/</a></a>
</p>

<p>
原文：
</p>

<blockquote>
<p>
  Here is a short PHP function that removes comments and whitespace from your CSS. If you happen to be generating your stylesheet dynamically, try wrapping this around the output to reduce the overall size.function compress\_css($css) {
<i>/ Remove comments
$css = preg\_replace('!</i>\*[\^*]*\*+([\^/][\^*]*\*+)*/!', '', $css);
// Remove whitespace
$css = str\_replace(array("\r\n", "\r", "\n", "\t", ' ', ' ', ' '), '', $css);
return $css;
}
</p>

<p>
Dont' forget that, if you are using PHP to output CSS, you'll need to serve the correct headers:header("Content-type: text/css");
header("Expires: " . gmdate("D, d M Y H:i:s", (time() + 604800000)) . " GMT");
</p>

<p>
The second line tells the browser to cache the styles for seven days. You can adjust that accordingly based on your preferences.
</p>
</blockquote>


<pre class="example">
// Remove comments
$css = preg_replace('!/\*[^*]*\*+([^/][^*]*\*+)*/!', '', $css);
// Remove whitespace
$css = str_replace(array("\r\n", "\r", "\n", "\t", '  ', '    ', '    '), '', $css);
return $css;
}
// Serve the correct headers
header("Content-type: text/css");
header("Expires: " . gmdate("D, d M Y H:i:s", (time() + 604800000)) . " GMT");
</pre>

<p>
上面的英文很简单，相信不用翻译了。
</p>

</section>



<footer id="footer">
    Send comments, critique and suggestions to <a href="mailto:guweigang &lt;at&gt; outlook &lt;dot&gt; com">Gu Weigang</a>.
    Powered by <a href="https://github.com/kelvinh/org-page">org-page</a>
</footer>

  </body>
</html>
